{% extends 'base.html' %}

{% block title %}Mis Pedidos - Mundo Cartas{% endblock %}

{% block page_header %}Mis Pedidos{% endblock %}

{% block toolbar %}
<a href="{% url 'carrito:catalogo' %}" class="toolbar-btn">ğŸ  CatÃ¡logo</a>
<a href="{% url 'carrito:mis_pedidos' %}" class="toolbar-btn active">ğŸ“‹ Mis Pedidos</a>
<a href="{% url 'carrito:ver_carrito' %}" class="toolbar-btn">ğŸ›’ Carrito</a>
{% endblock %}

{% block content %}
<div style="padding: 20px;">
    <div class="section-title">HISTORIAL DE PEDIDOS</div>
    
    {% if pedidos %}
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th style="width: 150px;">NÃšMERO PEDIDO</th>
                    <th style="width: 150px;">FECHA</th>
                    <th style="width: 100px;">PRODUCTOS</th>
                    <th style="width: 120px;">TOTAL</th>
                    <th style="width: 120px;">ESTADO</th>
                    <th style="width: 150px;">ACCIONES</th>
                </tr>
            </thead>
            <tbody>
                {% for pedido in pedidos %}
                <tr>
                    <td class="col-codigo">{{ pedido.numero_pedido }}</td>
                    <td class="col-fecha">{{ pedido.fecha_pedido|date:"d/m/Y H:i" }}</td>
                    <td style="text-align: center; font-weight: 600;">{{ pedido.detalles.count }}</td>
                    <td class="col-precio" style="font-weight: 700;">${{ pedido.total|floatformat:0 }}</td>
                    <td>
                        {% if pedido.estado == 'PAGADO' %}
                        <span class="badge badge-active">âœ“ Pagado</span>
                        {% elif pedido.estado == 'PENDIENTE' %}
                        <span class="badge" style="background: #fff3cd; color: #856404;">â³ Pendiente</span>
                        {% elif pedido.estado == 'LISTO' %}
                        <span class="badge" style="background: #d1ecf1; color: #0c5460;">ğŸ“¦ Listo</span>
                        {% elif pedido.estado == 'ENTREGADO' %}
                        <span class="badge" style="background: #d4edda; color: #155724;">âœ… Entregado</span>
                        {% else %}
                        <span class="badge badge-inactive">âœ• {{ pedido.get_estado_display }}</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'carrito:detalle_pedido' pedido.id %}" class="btn-icon" style="color: #4472c4; text-decoration: none;">
                            ğŸ“„ Ver Detalle
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">ğŸ“‹</div>
        <div><strong>No tienes pedidos todavÃ­a</strong></div>
        <div style="font-size: 13px; margin-top: 10px; margin-bottom: 20px;">
            Comienza a comprar en nuestro catÃ¡logo
        </div>
        <a href="{% url 'carrito:catalogo' %}" class="btn btn-primary" style="text-decoration: none;">
            ğŸ›ï¸ IR AL CATÃLOGO
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}